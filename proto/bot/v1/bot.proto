syntax = "proto3";
package contracts.bot.v1;

import "base/v1/context.proto"; //отправляем контекст кто, зачем и почему отправил запрос
import "base/v1/status.proto"; //получаем ответ выполнен запрос или ошибка
import "base/v1/collback.proto"; //получаем ответ выполнен запрос или ошибка

option go_package = "github.com/8920420-cpu/ContractsPsSmetaLib/gen/go/bot/v1";

message CreateBotRequest {
  contracts.base.v1.RequestContext context = 1; //отправляем контекст

  string phone = 2;
  string message = 3;

  string callback_target = 4;               // куда слать callback
} 
message CreateBotResponse {
  contracts.base.v1.ResponseStatus status = 1; //ждем овтет
}

// Callback для асинхронного ответа
message BotCallback {
  contracts.base.v1.CallbackStatus status = 1; // OK / NOT_COMPLETED
  string request_id = 2;
  string error_message = 3;
}

/*message BotCallback {
  contracts.base.v1.Callback callback = 1;
  string request_id = 2;
  string error_message = 3;
}*/

service BotService {
  rpc CreateBot(CreateBotRequest) returns (CreateBotResponse);
  // Callback придёт отдельно асинхронно
}